<!DOCTYPE html>
<html lang="fr" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>√âditeur Markdown - Cr√©ation d'EPUB</title>
    
    <!-- Feuille de style unique -->
    <link rel="stylesheet" href="styles.css">

    <!-- D√©pendances CDN externes -->
    <!-- Markdown-it : Moteur de rendu rapide et extensible (n√©cessaire pour injecter les data-source-line) -->
    <script src="https://cdn.jsdelivr.net/npm/markdown-it@14.1.0/dist/markdown-it.min.js"></script>
    <!-- SortableJS : Gestion fluide du glisser-d√©poser pour le r√©ordonnancement des chapitres -->
    <script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.2/Sortable.min.js"></script>
    <!-- JSZip : Cr√©ation d'archives ZIP en m√©moire (indispensable pour l'EPUB) -->
    <script src="https://cdn.jsdelivr.net/npm/jszip@3.10.1/dist/jszip.min.js"></script>
    <!-- FileSaver.js : D√©clenchement propre des t√©l√©chargements c√¥t√© client -->
    <script src="https://cdn.jsdelivr.net/npm/file-saver@2.0.5/dist/FileSaver.min.js"></script>
</head>
<body>

    <!-- Barre d'outils sup√©rieure -->
    <header id="main-toolbar">
        <div class="toolbar-section metadata-section">
            <input type="text" id="meta-title" placeholder="Titre du livre" aria-label="Titre du livre">
            <input type="text" id="meta-author" placeholder="Auteur" aria-label="Auteur">
            <input type="text" id="meta-language" placeholder="Langue (ex: fr)" value="fr" aria-label="Langue">
        </div>
        
        <div class="toolbar-section actions-section">
            <div class="editor-controls">
                <button id="btn-font-decrease" title="R√©duire la police">A-</button>
                <button id="btn-font-increase" title="Agrandir la police">A+</button>
                <button id="btn-theme-toggle" title="Basculer le th√®me">üåô / ‚òÄÔ∏è</button>
            </div>
            <div class="export-controls">
                <!-- Champ de fichier masqu√© pour l'importation via l'explorateur OS -->
                <input type="file" id="file-import" accept=".md,.txt" style="display: none;">
                <button id="btn-import">Import MD/TXT</button>
                
                <button id="btn-export-epub" class="primary">Export EPUB</button>
                <button id="btn-export-html">Export HTML</button>
                <button id="btn-export-md">Export MD</button>
            </div>
        </div>
    </header>

    <!-- Conteneur principal de l'application (Grille) -->
    <main id="app-container">
        
        <!-- Panneau lat√©ral : Liste des chapitres -->
        <aside id="sidebar">
            <div class="sidebar-header">
                <h2>Chapitres</h2>
                <button id="btn-add-chapter" title="Ajouter un chapitre">+</button>
            </div>
            <ul id="chapter-list">
                <!-- Les chapitres seront inject√©s ici par chapters.js -->
            </ul>
        </aside>

        <!-- Panneau central : √âditeur de texte -->
        <section id="editor-panel">
            <!-- Goutti√®re des num√©ros de ligne -->
            <div id="line-numbers" aria-hidden="true"></div>
            <!-- Zone de saisie Markdown -->
            <textarea id="markdown-editor" spellcheck="false" placeholder="R√©digez votre chapitre ici... (Glissez-d√©posez un fichier .md ou .txt pour tout remplacer)"></textarea>
        </section>

        <!-- Panneau droit : Pr√©visualisation -->
        <section id="preview-panel">
            <div id="preview-content" class="markdown-body">
                <!-- Le HTML g√©n√©r√© sera inject√© ici par preview.js -->
            </div>
        </section>

    </main>

    <!-- Barre d'√©tat inf√©rieure : Statistiques -->
    <footer id="status-bar">
        <span id="stat-chapters">0 chapitre(s)</span> | 
        <span id="stat-words-current">Chapitre : 0 mot(s)</span> | 
        <span id="stat-words-total">Livre : 0 mot(s)</span> | 
        <span id="stat-size">Taille : 0 Ko</span>
    </footer>

    <!-- Scripts de l'application (Chargement synchrone, ordre critique) -->
    <!-- 1. C≈ìur de l'application -->
    <script src="js/state.js"></script>
    <script src="js/typography.js"></script>
    <script src="js/parser.js"></script>
    
    <!-- 2. Composants UI -->
    <script src="js/editor.js"></script>
    <script src="js/preview.js"></script>
    <script src="js/chapters.js"></script>
    
    <!-- 3. Entr√©es / Sorties -->
    <script src="js/epub.js"></script>
    <script src="js/io.js"></script>
    
    <!-- 4. Orchestrateur (Doit √™tre charg√© en dernier) -->
    <script src="js/main.js"></script>

</body>
</html>